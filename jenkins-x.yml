buildPack: go
pipelineConfig:
  pipelines:
    pullRequest:
      preBuild:
        steps:
          - name: dependencies
            sh: dep ensure
      build:
        steps:
          - name: Build Docker
            sh: docker build -t sqs-test:latest .
    release:
      setVersion:
        steps:
        - sh: echo \$(jx-release-version) > VERSION
          comment: so we can retrieve the version in later steps
        - sh: jx step tag --version \$(cat VERSION)
      build:
        steps:
        - sh: dep ensure
